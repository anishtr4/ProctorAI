<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProctorAI - Secure Coding Assessments</title>
  <link rel="stylesheet" href="./src/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
    rel="stylesheet">
</head>

<body>
  <!-- Landing Page (Interviewer Only) -->
  <div id="landing-page" class="landing-screen">
    <div class="landing-container">
      <div class="landing-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a2 2 0 0 0-2 2v2M5 7H2v5"></path>
        </svg>
        <h1>ProctorAI</h1>
        <p>Secure Coding Assessment Platform</p>
      </div>
      <div class="landing-content">
        <button id="create-assessment-btn" class="btn btn-primary btn-xl">
          ‚ûï Create New Assessment
        </button>
        <p class="landing-hint">Generate a unique link to share with your candidate</p>
      </div>
    </div>
  </div>

  <!-- Session Created Screen -->
  <div id="session-created" class="landing-screen hidden">
    <div class="setup-container">
      <h2>‚úÖ Assessment Created</h2>
      <p>Share this unique link with your candidate:</p>
      <div class="url-display">
        <input type="text" id="session-url" readonly>
        <button id="copy-url-btn" class="btn btn-primary">üìã Copy</button>
      </div>
      <div class="expiry-notice">
        <span>‚è∞ Link expires in 24 hours</span>
      </div>
      <div class="share-options">
        <button id="share-email-btn" class="btn btn-secondary">üìß Email</button>
        <button id="share-teams-btn" class="btn btn-secondary">üí¨ Teams</button>
        <button id="share-slack-btn" class="btn btn-secondary">üí¨ Slack</button>
      </div>
      <button id="start-monitoring-btn" class="btn btn-success btn-large">Start Monitoring ‚Üí</button>
    </div>
  </div>

  <!-- Session Expired Screen -->
  <div id="session-expired" class="landing-screen hidden">
    <div class="setup-container error-container">
      <h2>‚è∞ Session Expired</h2>
      <p>This assessment link has expired or is invalid.</p>
      <p class="hint">Please contact your interviewer for a new link.</p>
    </div>
  </div>

  <!-- Main App -->
  <div id="main-app" class="hidden">
    <header class="header">
      <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a2 2 0 0 0-2 2v2M5 7H2v5"></path>
        </svg>
        ProctorAI
        <span id="mode-badge" class="mode-badge">Interviewer</span>
      </div>
      <div class="header-center">
        <span id="question-progress">Question 1 of 8</span>
        <span class="timer" id="timer">‚è±Ô∏è 15:00</span>
      </div>
      <div class="header-right">
        <span id="connection-status">Initializing...</span>
        <button id="exit-mode-btn" class="btn-exit">Exit</button>
      </div>
    </header>

    <main class="app-container" id="app-container">
      <!-- Left Panel: Proctoring (Interviewer only) -->
      <aside class="proctor-panel" id="proctor-panel">
        <div class="video-section-small">
          <video id="webcam" playsinline muted autoplay></video>
          <canvas id="output_canvas"></canvas>
          <div class="overlay-status-small">
            <div id="system-status-dot" class="status-dot"></div>
            <span>Live</span>
          </div>
        </div>

        <div class="card compact">
          <div class="score-row">
            <span class="label">Trust Score</span>
            <span id="trust-score" class="score-value">100</span>
          </div>
          <div class="metrics-row">
            <div class="metric-small">
              <span id="face-count">0</span>
              <span>Faces</span>
            </div>
            <div class="metric-small">
              <span id="gaze-status">-</span>
              <span>Gaze</span>
            </div>
          </div>
        </div>

        <div class="card compact alert-log-small">
          <h4>Alerts</h4>
          <ul id="event-log" class="log-list-small"></ul>
        </div>
      </aside>

      <!-- Candidate Video Mini -->
      <div class="candidate-video-mini hidden" id="candidate-video-mini">
        <video id="webcam-mini" playsinline muted autoplay></video>
        <canvas id="output_canvas_mini"></canvas>
        <div class="mini-status">
          <div class="status-dot"></div>
        </div>
      </div>

      <!-- Center Panel: Editor -->
      <section class="editor-panel">
        <div class="question-header">
          <div class="question-meta">
            <span id="question-language" class="lang-badge">JavaScript</span>
            <span id="question-difficulty" class="difficulty-badge easy">Easy</span>
          </div>
          <h2 id="question-title">Two Sum</h2>
        </div>

        <div class="question-description" id="question-description"></div>
        <div class="editor-container" id="monaco-editor"></div>

        <div class="editor-actions">
          <button id="prev-btn" class="btn btn-secondary" disabled>‚Üê Previous</button>
          <button id="run-btn" class="btn btn-primary">‚ñ∂ Run Code</button>
          <button id="submit-btn" class="btn btn-success">Submit & Next ‚Üí</button>
        </div>
      </section>

      <!-- Right Panel: Questions -->
      <aside class="questions-panel" id="questions-panel">
        <h3>Questions</h3>
        <div id="question-list" class="question-list"></div>

        <div id="interviewer-controls" class="interviewer-controls">
          <h4>Set Time</h4>
          <div class="time-control">
            <input type="number" id="time-input" value="15" min="1" max="60">
            <span>min</span>
            <button id="set-time-btn" class="btn btn-primary btn-sm">Set</button>
          </div>
        </div>

        <button id="finish-btn" class="btn btn-danger">Finish Assessment</button>
      </aside>
    </main>
  </div>

  <script type="module" src="/main.js"></script>
</body>

</html>